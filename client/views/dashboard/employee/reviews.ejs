<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reviews</title>
    <link rel="icon" href="/images/logo-blanc.png" type="image/x-icon">
    <link type="text/css" rel="stylesheet" href="/css/output.css" />
    <link rel="stylesheet" href="/css/style.css">
    <script defer src="/js/review.js"></script>
</head>
<body class="min-h-screen relative">
    <!-- Nav Bar -->
    <header>
        <%- include('../../components/dashboard/nav-bar-dashboard') %>
    </header>

    <!-- Side Bar Menu -->
    <aside class="fixed z-20 top-0 left-0 h-screen">
        <%- include('../../components/dashboard/side-menu') %>
    </aside>

    <!-- Main Content -->
    <main class="flex text-blueOne flex-col items-center w-full justify-center md:w-[85vw] ml-auto md:pt-32 md:mb-32" id="main-container">
        <% if (error_msg) { %>
            <% error_msg.forEach(error => { %>
              <ul class="w-fit mx-auto">
                <li class="list-disc font-arvo text-redOne text-center"><%= error %></li>
              </ul>
            <% }) %>
          <% } %>
    
        <% if (success_msg) { %>
            <% success_msg.forEach(message => { %>
              <ul class="w-fit mx-auto">
                <p class="list-disc font-arvo text-green-500 text-center"><%= message %></p>
              </ul>
            <% }) %>
          <% } %>
        <!-- Reviews Section -->
        <section class="w-full md:w-[48%] flex items-center gap-y-2 justify-center flex-col md:gap-y-10 mt-10">
            <h1 class="text-blueOne font-bold text-5xl text-center font-arvo">Nouveaux avis</h1>

            <% if (reviews && reviews.length > 0) { %>
                <% reviews.forEach(review => { %>
                    <!-- Movie Reviews Card -->
                    <div class="flex flex-col w-full mt-4" data-review-id="<%= review.review_id %>">
                        <div class="w-full flex items-center bg-blueOne h-12">
                            <p class="w-full text-center text-white text-lg font-arvo font-bold"><%= review.movie_title %></p>
                        </div>

                        <div class="flex items-center justify-between">
                            <div class="flex justify-start w-[80%] py-6 px-3">
                                <p class="w-full text-left text-blueOne text-lg font-arvo font-light"><%= review.comment %></p>
                            </div>

                            <div class="flex items-center justify-center w-[20%] pl-4">
                                <div class="w-14 h-14 flex items-center justify-center bg-goldOne">
                                    <p class="text-blueOne font-arvo font-bold"><%= review.rating %></p>
                                </div>
                            </div>
                        </div>

                        <div class="flex w-full h-12">
                            <button class="w-[50%] bg-white border border-blueOne flex items-center justify-center validate-review" data-review-id="<%= review.review_id %>">
                                <p class="text-lg text-blueOne font-arvo font-bold text-center">VALIDER</p>
                            </button>
                            <button class="w-[50%] bg-redOne flex items-center justify-center hover:bg-red-600 duration-300 ease-out delete-review" data-review-id="<%= review.review_id %>">
                                <p class="text-lg text-white font-arvo font-bold text-center">SUPPRIMER</p>
                            </button>
                        </div>
                    </div>
                <% }) %>
            <% } %>
        </section>
    </main>

    <!-- Footer -->
    <footer class="pt-[26rem]">
        <%- include('../../components/footer') %>
    </footer>
    
    <div class="hidden" id="close-filter-menu"></div>
</body>
</html>
